# $Id$
# Maintainer: Andrea Scarpino <andrea@archlinux.org>
# Contributor: Pierre Schmitz <pierre@archlinux.de>

pkgbase=kdegames
pkgname=('kdegames-bomber'
         'kdegames-bovo'
         'kdegames-granatier'
         'kdegames-kajongg'
         'kdegames-kapman'
         'kdegames-katomic'
         'kdegames-kblackbox'
         'kdegames-kblocks'
         'kdegames-kbounce'
         'kdegames-kbreakout'
         'kdegames-kdiamond'
         'kdegames-kfourinline'
         'kdegames-kgoldrunner'
         'kdegames-kigo'
         'kdegames-killbots'
         'kdegames-kiriki'
         'kdegames-kjumpingcube'
         'kdegames-klines'
         'kdegames-klickety'
         'kdegames-kmahjongg'
         'kdegames-kmines'
         'kdegames-knavalbattle'
         'kdegames-knetwalk'
         'kdegames-kolf'
         'kdegames-kollision'
         'kdegames-konquest'
         'kdegames-kpatience'
         'kdegames-kreversi'
         'kdegames-kshisen'
         'kdegames-ksirk'
         'kdegames-ksnakeduel'
         'kdegames-kspaceduel'
         'kdegames-ksquares'
         'kdegames-ksudoku'
         'kdegames-ktuberling'
         'kdegames-kubrick'
         'kdegames-libkdegames'
         'kdegames-libkmahjongg'
         'kdegames-lskat'
         'kdegames-palapeli')
pkgver=4.9.3
pkgrel=1
arch=('i686' 'x86_64')
url='http://www.kde.org'
license=('GPL' 'LGPL' 'FDL')
groups=('kde' 'kdegames')
makedepends=('cmake' 'automoc4' 'twisted' 'kdebindings-python2'
             'openal' 'mesa')
source=("http://download.kde.org/stable/${pkgver}/src/${pkgbase}-${pkgver}.tar.xz")
sha1sums=('c5b61b6df2d6683fa96f294bebeb09b1403ce6d8')

build() {
	cd $srcdir
	mkdir build
	cd build
	cmake ../${pkgbase}-${pkgver} \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_SKIP_RPATH=ON \
		-DCMAKE_INSTALL_PREFIX=/usr \
        -DPYTHON_EXECUTABLE=/usr/bin/python2
	make
}

package_kdegames-bomber() {
	pkgdesc='Arcade Bombing Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/bomber/"
	install='kdegames.install'
	cd $srcdir/build/bomber
	make DESTDIR=$pkgdir install
}

package_kdegames-bovo() {
	pkgdesc='Five-in-a-row Board Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/bovo/"
	install='kdegames.install'
	cd $srcdir/build/bovo
	make DESTDIR=$pkgdir install
}

package_kdegames-granatier() {
	pkgdesc='Granatier'
	depends=('kdebase-runtime' 'kdegames-libkdegames' 'openal')
	url="http://kde.org/applications/games/granatier/"
	install='kdegames.install'
	cd $srcdir/build/granatier
	make DESTDIR=$pkgdir install
}

package_kdegames-kajongg() {
	pkgdesc='The ancient Chinese board game for 4 players'
	depends=('kdegames-libkdegames' 'kdegames-libkmahjongg' 'kdebindings-python2' 'twisted')
        url="http://www.kde.org/applications/games/kajongg/"
	install='kdegames.install'
	cd $srcdir/build/kajongg
	make DESTDIR=$pkgdir install

	# Use the python2 executable
	find "${pkgdir}" -name '*.py' | xargs sed -i 's|#!/usr/bin/env python|#!/usr/bin/env python2|'
}

package_kdegames-kapman() {
	pkgdesc='Eat pills escaping ghosts'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kapman/"
	install='kdegames.install'
	cd $srcdir/build/kapman
	make DESTDIR=$pkgdir install
}

package_kdegames-katomic() {
	pkgdesc='Sokoban-like Logic Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/katomic/"
	install='kdegames.install'
	cd $srcdir/build/katomic
	make DESTDIR=$pkgdir install
}

package_kdegames-knavalbattle() {
	pkgdesc='Naval Battle'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/knavalbattle/"
	install='kdegames-knavalbattle.install'
    replaces=('kdegames-kbattleship')
    conflicts=('kdegames-kbattleship')
    cd $srcdir/build/knavalbattle
	make DESTDIR=$pkgdir install
}

package_kdegames-kblackbox() {
	pkgdesc='Blackbox Logic Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kblackbox/"
	install='kdegames.install'
	cd $srcdir/build/kblackbox
	make DESTDIR=$pkgdir install
}

package_kdegames-kblocks() {
	pkgdesc='Falling Blocks Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kblocks/"
	install='kdegames.install'
	cd $srcdir/build/kblocks
	make DESTDIR=$pkgdir install
}

package_kdegames-kbounce() {
	pkgdesc='Ball Bouncing Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kbounce/"
	install='kdegames.install'
	cd $srcdir/build/kbounce
	make DESTDIR=$pkgdir install
}

package_kdegames-kbreakout() {
	pkgdesc='Breakout-like Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kbreakout/"
	install='kdegames.install'
	cd $srcdir/build/kbreakout
	make DESTDIR=$pkgdir install
}

package_kdegames-kdiamond() {
	pkgdesc='Three-in-a-row game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kdiamond/"
	install='kdegames.install'
	cd $srcdir/build/kdiamond
	make DESTDIR=$pkgdir install
}

package_kdegames-kfourinline() {
	pkgdesc='Four-in-a-row Board Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kfourinline/"
	install='kdegames-kfourinline.install'
	cd $srcdir/build/kfourinline
	make DESTDIR=$pkgdir install
}

package_kdegames-kgoldrunner() {
	pkgdesc='A game of action and puzzle-solving'
	depends=('kdebase-runtime' 'kdegames-libkdegames' 'openal')
	url="http://kde.org/applications/games/kgoldrunner/"
	install='kdegames.install'
	cd $srcdir/build/kgoldrunner
	make DESTDIR=$pkgdir install
}

package_kdegames-kigo() {
	pkgdesc='Go Board Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames' 'gnugo')
	url="http://kde.org/applications/games/kigo/"
	install='kdegames-kigo.install'
	cd $srcdir/build/kigo
	make DESTDIR=$pkgdir install
}

package_kdegames-killbots() {
	pkgdesc='Killbots'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/killbots/"
	install='kdegames.install'
	cd $srcdir/build/killbots
	make DESTDIR=$pkgdir install
}

package_kdegames-kiriki() {
	pkgdesc='Yahtzee-like Dice Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kiriki/"
	install='kdegames.install'
	cd $srcdir/build/kiriki
	make DESTDIR=$pkgdir install
}

package_kdegames-kjumpingcube() {
	pkgdesc='Territory Capture Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kjumpingcube/"
	install='kdegames.install'
	cd $srcdir/build/kjumpingcube
	make DESTDIR=$pkgdir install
}

package_kdegames-klickety() {
	pkgdesc='Board Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	replaces=('kdegames-ksame')
	conflicts=('kdegames-ksame')
	url="http://kde.org/applications/games/ksame/"
	install='kdegames.install'
	cd $srcdir/build/klickety
	make DESTDIR=$pkgdir install
}

package_kdegames-klines() {
	pkgdesc='Tactical Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/klines/"
	install='kdegames.install'
	cd $srcdir/build/klines
	make DESTDIR=$pkgdir install
}

package_kdegames-kmahjongg() {
	pkgdesc='Mahjongg Solitaire'
	depends=('kdebase-runtime' 'kdegames-libkdegames' 'kdegames-libkmahjongg')
	url="http://kde.org/applications/games/kmahjongg/"
	install='kdegames.install'
	cd $srcdir/build/kmahjongg
	make DESTDIR=$pkgdir install
}

package_kdegames-kmines() {
	pkgdesc='Minesweeper-like Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kmines/"
	install='kdegames.install'
	cd $srcdir/build/kmines
	make DESTDIR=$pkgdir install
}

package_kdegames-knetwalk() {
	pkgdesc='Network Construction Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/knetwalk/"
	install='kdegames.install'
	cd $srcdir/build/knetwalk
	make DESTDIR=$pkgdir install
}

package_kdegames-kolf() {
	pkgdesc='Miniature Golf'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kolf/"
	install='kdegames-kolf.install'
	cd $srcdir/build/kolf
	make DESTDIR=$pkgdir install
}

package_kdegames-kollision() {
	pkgdesc='A simple ball dodging game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kollision/"
	install='kdegames.install'
	cd $srcdir/build/kollision
	make DESTDIR=$pkgdir install
}

package_kdegames-konquest() {
	pkgdesc='Galactic Strategy Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/konquest/"
	install='kdegames.install'
	cd $srcdir/build/konquest
	make DESTDIR=$pkgdir install
}

package_kdegames-kpatience() {
	pkgdesc='Patience Card Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kpatience/"
	install='kdegames-kpatience.install'
	replaces=('kdegames-kpat')
	cd $srcdir/build/kpat
	make DESTDIR=$pkgdir install
}

package_kdegames-kreversi() {
	pkgdesc='Reversi Board Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kreversi/"
	install='kdegames.install'
	cd $srcdir/build/kreversi
	make DESTDIR=$pkgdir install
}

package_kdegames-kshisen() {
	pkgdesc='Shisen-Sho Mahjongg-like Tile Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames' 'kdegames-libkmahjongg')
	url="http://kde.org/applications/games/kshisen/"
	install='kdegames.install'
	cd $srcdir/build/kshisen
	make DESTDIR=$pkgdir install
}

package_kdegames-ksirk() {
	pkgdesc='World Domination Strategy Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/ksirk/"
	install='kdegames.install'
	cd $srcdir/build/ksirk
	make DESTDIR=$pkgdir install
}

package_kdegames-kspaceduel() {
	pkgdesc='Space Arcade Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kspaceduel/"
	install='kdegames-kspaceduel.install'
	cd $srcdir/build/kspaceduel
	make DESTDIR=$pkgdir install
}

package_kdegames-ksquares() {
	pkgdesc='Connect the dots to create squares'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/ksquares/"
	install='kdegames.install'
	cd $srcdir/build/ksquares
	make DESTDIR=$pkgdir install
}

package_kdegames-ksudoku() {
	pkgdesc='KSudoku, Sudoku game & more for KDE'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/ksudoku/"
	install='kdegames.install'
	cd $srcdir/build/ksudoku
	make DESTDIR=$pkgdir install
}

package_kdegames-ksnakeduel() {
	pkgdesc='Snake-like Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/ksnakeduel/"
	install='kdegames.install'
    replaces=('kdegames-ktron')
    conflicts=('kdegames-ktron')
	cd $srcdir/build/ksnakeduel
	make DESTDIR=$pkgdir install
}

package_kdegames-ktuberling() {
	pkgdesc='Picture Game for Children'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/ktuberling/"
	install='kdegames-ktuberling.install'
	cd $srcdir/build/ktuberling
	make DESTDIR=$pkgdir install
}

package_kdegames-kubrick() {
	pkgdesc='A 3-D game based on RubikÂ´s Cube'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/kubrick/"
	install='kdegames.install'
	cd $srcdir/build/kubrick
	make DESTDIR=$pkgdir install
}

package_kdegames-libkdegames() {
	pkgdesc='KDE game library'
	groups=()
	depends=('kdelibs' 'openal')
	cd $srcdir/build/libkdegames
	make DESTDIR=$pkgdir install
}

package_kdegames-libkmahjongg() {
	pkgdesc='Library used for loading and rendering of Mahjongg tilesets'
	groups=()
	depends=('kdelibs')
	cd $srcdir/build/libkmahjongg
	make DESTDIR=$pkgdir install
}

package_kdegames-lskat() {
	pkgdesc='Card Game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/lskat/"
	install='kdegames-lskat.install'
	cd $srcdir/build/lskat
	make DESTDIR=$pkgdir install
}

package_kdegames-palapeli() {
	pkgdesc='Jigsaw puzzle game'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	url="http://kde.org/applications/games/palapeli/"
	install='kdegames-palapeli.install'
	cd $srcdir/build/palapeli
	make DESTDIR=$pkgdir install
}
