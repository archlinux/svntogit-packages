# $Id$
# Maintainer:
# Contributor: Alexander Baldeck <alexander@archlinux.org>

pkgname=snes9x
pkgver=1.52
pkgrel=1
pkgdesc="A portable Emulator for the Super Nintento Entertainment System"
arch=('i686' 'x86_64')
url="http://www.snes9x.com"
license=('custom')
depends=('zlib' 'libpng>=1.4.0' 'sdl' 'mesa')
[ "${CARCH}" = "x86_64" ] && depends=(${depends[@]} 'nasm')
makedepends=('intltool')
source=(http://www.caitsith2.com/snes9x152/${pkgname}-${pkgver}-src.tar.bz2
        'LICENSE')
md5sums=('813bd3a0f99732ee0238a2c8ab417725'
         '9b69c926c88c5d9b26c69b9437d6cf1d')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}-src/unix
  
  ./configure --prefix=/usr \
              --with-sdd1-decomp \
              --with-netplay
  make clean || return 1
  make || return 1
  install -Dm755 snes9x ${pkgdir}/usr/bin/snes9x || return 1

  install -Dm644 ${srcdir}/LICENSE ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}
