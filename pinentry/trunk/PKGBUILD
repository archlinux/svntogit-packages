# $Id$
# Maintainer: Tobias Powalowski <tpowa@archlinux.org>
pkgname=pinentry
pkgver=0.7.5
pkgrel=3
pkgdesc="a collection of simple PIN or passphrase entry dialogs which utilize the Assuan protocol"
arch=(i686 x86_64)
license=('GPL')
url="http://www.gnupg.org/aegypten2"
depends=('ncurses' 'libcap')
makedepends=('gtk' 'qt3' 'gtk2')
source=(ftp://ftp.gnupg.org/gcrypt/$pkgname/$pkgname-$pkgver.tar.gz
        glib2.patch)
md5sums=('ca492afbbb59cd19f1c875533f18b269'
         'df553f478e7f9e943367967998bb0d43')

build() {
  cd $startdir/src/$pkgname-$pkgver
  patch -Np1 -i ${srcdir}/glib2.patch
  [ "$QTDIR" = "" ] && source /etc/profile.d/qt3.sh
  ./configure --prefix=/usr \
	--enable-pinentry-curses \
	--enable-pinentry-gtk \
	--enable-pinentry-gtk2 \
	--enable-pinentry-qt \
	--enable-fallback-curses
  make || return 1
  make DESTDIR=$startdir/pkg install
  rm ${pkgdir}/usr/share/info/dir
}
