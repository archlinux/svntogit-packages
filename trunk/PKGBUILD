# $Id$
# Maintainer:  Bart≈Çomiej Piotrowski <bpiotrowski@archlinux.org>
# Contributor: kfgz <kfgz at interia dot pl>
# Contributor: pootzko <pootzko at gmail dot com>

pkgname=haveged
pkgver=1.8
_pkgver=${pkgver/.c/c}
pkgrel=1
pkgdesc='Entropy harvesting daemon using CPU timings'
arch=('i686' 'x86_64')
url='http://www.issihosts.com/haveged'
license=('GPL')
depends=('glibc')
source=($url/$pkgname-$_pkgver.tar.gz
        service)
md5sums=('e0034fd8a645b7499157a31a3e3b224d'
         '777c7ac7fa145c03fca3ba9dcd4501de')

build() {
  cd $pkgname-$_pkgver
  ./configure --prefix=/usr --bindir=/usr/bin --sbindir=/usr/bin
  make
}

package() {
  cd $pkgname-$_pkgver
  make DESTDIR="$pkgdir" install

  install -Dm644 "$srcdir"/service \
    "$pkgdir"/usr/lib/systemd/system/haveged.service
}
