# $Id$
# Maintainer: Douglas Soares de Andrade <douglas@archlinux.org>
# Contributor: Jeff 'codemac' Mickey <jeff@archlinux.org>
# Contributor: Dan McGee <dpmcgee@gmail.com>

pkgname=monotone
pkgver=0.40
pkgrel=1
pkgdesc="A modern distributed version control system, like hg, darcs, or git"
url="http://www.monotone.ca"
license=("GPL")
arch=(i686 x86_64)
depends=('boost')
makedepends=('zlib' 'gcc-libs')
install=monotone.install
source=(http://www.monotone.ca/downloads/$pkgver/$pkgname-$pkgver.tar.gz)

md5sums=('4d90776beaff7445e7a2d8774378fbba')

build() {
  cd $startdir/src/$pkgname-$pkgver
  
  ./configure --prefix=/usr --sysconfdir=/etc
  make || return 1
  make DESTDIR=$startdir/pkg install

  # install completion scripts
  mkdir -p $startdir/pkg/etc/bash_completion.d
  mkdir -p $startdir/pkg/usr/share/zsh/site-functions/
  install -m644 contrib/monotone.bash_completion $startdir/pkg/etc/bash_completion.d/monotone
  install -m644 contrib/monotone.zsh_completion $startdir/pkg/usr/share/zsh/site-functions/monotone
}
