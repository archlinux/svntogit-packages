# $Id$
# Contributor : Rohan Dhruva

pkgname=gnash-common
pkgver=0.8.3
pkgrel=4
pkgdesc="A GNU Flash movie player."
arch=('i686' 'x86_64')
url="http://www.gnu.org/software/gnash/"
license=("GPL3")
depends=('fontconfig' 'libxml2' 'curl' 'libtool>=2.2-2' 'ffmpeg>=20080715' 'boost>=1.35' 'libxi' 'libdca' 'glib2')
makedepends=('pkgconfig' 'diffutils' 'agg' 'gtk2')
source=(http://ftp.gnu.org/gnu/gnash/${pkgver}/gnash-${pkgver}.tar.bz2)
md5sums=('5033ef2602ea1234a9ccb73000a0dedb')
options=('!libtool' '!emptydirs')
provides=('gnash')
replaces=('gnash')

build() {
  cd $startdir/src/gnash-$pkgver

  ./configure --prefix=/usr \
   --sysconfdir=/etc \
   --disable-kparts \
   --disable-nsapi \
   --enable-gui=gtk \
   --enable-z \
   --enable-jpeg \
   --enable-renderer=agg \
   --enable-media=ffmpeg \
   --enable-write \
   --disable-cygnal \
   --disable-static \
   --with-ffmpeg-incl=/usr/include || return 1

  make || return 1
  make DESTDIR=$startdir/pkg install || return 1

  # cleanup for the plugins
  rm -f $startdir/pkg/usr/bin/gtk-gnash
}
