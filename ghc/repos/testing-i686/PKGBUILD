# $Id$
# Maintainer: Vesa Kaihlavirta <vesa@archlinux.org>
pkgname=ghc
pkgver=6.12.1
pkgrel=2
pkgdesc="The Glasgow Haskell Compiler"
arch=(i686 x86_64)
url="http://www.haskell.org/ghc/"
license=("custom")
depends=(gmp perl)
makedepends=(ghc happy perl)
provides=("haskell-array=0.3.0.0"
          "haskell-bytestring=0.9.1.5"
          "haskell-cabal=1.8.0.2"
          "haskell-containers=0.3.0.0"
          "haskell-directory=1.0.1.0"       
          "haskell-extensible-exceptions=0.1.1.1"
          "haskell-filepath=1.1.0.3"
          "haskell-haskell98=1.0.1.1"
          "haskell-hpc=0.5.0.4"
          "haskell-old-locale=1.0.0.2"
          "haskell-old-time=1.0.0.3"
          "haskell-pretty=1.0.1.1"
          "haskell-process=1.0.1.2"
          "haskell-random=1.0.0.2"
          "haskell-syb=0.1.0.2"
          "haskell-template-haskell=2.4.0.0"
          "haskell-time=1.1.4"
          "haskell-unix=2.4.0.0"
          "haskell-utf8-string=0.3.4"
         )
replaces=("haskell-array<0.3.0.0" 
          "haskell-bytestring<0.9.1.5"
          "haskell-cabal<1.8.0.2"
          "haskell-containers<0.3.0.0"
          "haskell-directory<1.0.1.0"
          "haskell-extensible-exceptions<0.1.1.1"
          "haskell-filepath<1.1.0.3"
          "haskell-haskell98<1.0.1.1"
          "haskell-hpc<0.5.0.4"
          "haskell-old-locale<1.0.0.2"
          "haskell-old-time<1.0.0.3"
          "haskell-pretty<1.0.1.1"
          "haskell-process<1.0.1.2"
          "haskell-random<1.0.0.2"
          "haskell-syb<0.1.0.2"
          "haskell-template-haskell<2.4.0.0"
          "haskell-time<1.1.4"
          "haskell-unix<2.4.0.0"
          "haskell-utf8-string<0.3.4"
         )

backup=(usr/lib/ghc-6.12.1/package.conf)
install=(ghc.install)

source=("http://www.haskell.org/ghc/dist/$pkgver/$pkgname-$pkgver-src.tar.bz2" \
        build.mk ghc.install)

build() {
  cd $srcdir/$pkgname-$pkgver

  cp ../../build.mk mk/build.mk

  ./configure --prefix=/usr 
  make -j1 || return 1
  make DESTDIR=$pkgdir install

  install -Dm644 LICENSE ${pkgdir}/usr/share/licenses/ghc/license
}
md5sums=('3a2b23f29013605f721ebdfc29de9c92'
         '31f83779da0e727dbe536ba671281e47'
         'd03bca6b591043c0fe996d72dd448919')
