# $Id: PKGBUILD,v 1.9 2009/02/07 06:23:08 abhidg Exp $
# Maintainer: Pierre Schmitz <pierre@archlinux.de>

pkgname=php-fileinfo
pkgver=1.0.4
pkgrel=5
arch=('i686' 'x86_64')
pkgdesc="This extension allows retrieval of information regarding vast majority of file."
url="http://pecl.php.net/package/Fileinfo"
license=("PHP")
depends=('file' 'php')
install=php-fileinfo.install
backup=('etc/php/conf.d/fileinfo.ini')
source=("http://pecl.php.net/get/Fileinfo-${pkgver}.tgz"
        'magic.patch')
md5sums=('2854e749db157365c769cb9496f5586f'
         '325b3f829cc368820682932eccf62087')

build() {
	cd $srcdir/Fileinfo-$pkgver
	patch -p0 -i $srcdir/magic.patch
	phpize || return 1
	./configure --prefix=/usr || return 1
	make || return 1
	make INSTALL_ROOT=$pkgdir install || return 1
	echo ';extension=fileinfo.so' > fileinfo.ini
	install -D -m644 fileinfo.ini $pkgdir/etc/php/conf.d/fileinfo.ini
}
