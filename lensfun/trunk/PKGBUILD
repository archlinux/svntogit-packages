# $Id$
# Maintainer: Tobias Powalowski <tpowa@archlinux.org>

pkgname=lensfun
pkgver=0.2.5
pkgrel=2
pkgdesc="Database of photographic lenses and a library that allows advanced access to the database"
arch=(i686 x86_64)
url="http://lensfun.berlios.de/"
license=('LGPL3')
depends=('glibc' 'glib2')
makedepends=('python' 'libpng' 'doxygen')
source=("http://download.berlios.de/${pkgname}/${pkgname}-${pkgver}.tar.bz2"
        "runtime.cpu.detection.fix.backport.patch")

build() {
    cd "${srcdir}/${pkgname}-${pkgver}"
    sed -i 's|#!/usr/bin/python|#!/usr/bin/python2|' configure
    patch -p0 -i "${srcdir}/runtime.cpu.detection.fix.backport.patch"
    ./configure \
        --prefix=/usr \
        --libdir=/usr/lib
    make all
}

package() {
    cd "${srcdir}/${pkgname}-${pkgver}"
    make INSTALL_PREFIX="$pkgdir" install
}

md5sums=('a10438dffae68a5988fc54b0393a3755'
         'a2033928f263db319de78182ab12fb7d')
