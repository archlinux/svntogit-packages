# $Id$
# Contributor: Andrea Scarpino <andrea@archlinux.org>
# Contributor: Kevin Piche <kevin@archlinux.org>
# Contributor: Manolis Tzanidakis

pkgname=perl-libwww
_realname=libwww-perl
pkgver=5.833
pkgrel=3
pkgdesc="A set of Perl modules which provides a simple and consistent API to the WWW."
arch=('any')
license=('PerlArtistic')
url="http://search.cpan.org/dist/${_realname}/"
depends=('perl-uri' 'perl-html-parser' 'perl')
optdepends=('perl-crypt-ssleay: for SSL/TLS support')
options=('!emptydirs')
replaces=('libwww-perl')
# FS#17101
provides=('libwww-perl' 'perl-bundle-lwp' 'perl-lwp-protocol-cpan'
  'perl-lwp-protocol-ftp' 'perl-http-status' 'perl-file-listing' 'perl-http-headers'
  'perl-http-cookies-microsoft' 'perl-lwp-protocol-nogo' 'perl-lwp-protocol-nntp'
  'perl-http-daemon' 'perl-lwp-protocol-mailto' 'perl-html-form'
  'perl-lwp-protocol-gopher' 'perl-lwp-conncache' 'perl-net-https'
  'perl-http-message' 'perl-http-cookies' 'perl-http-request-common'
  'perl-http-headers-auth' 'perl-http-response' 'perl-lwp-protocol-loopback'
  'perl-http-cookies-netscape' 'perl-lwp-authen-ntlm' 'perl-lwp-authen-basic'
  'perl-http-request' 'perl-lwp-protocol' 'perl-www-robotrules' 'perl-lwp'
  'perl-lwp-mediatypes' 'perl-lwp-protocol-data' 'perl-http-negotiate'
  'perl-lwp-protocol-https' 'perl-lwp-simple' 'perl-net-http-nb'
  'perl-lwp-debugfile' 'perl-net-http' 'perl-lwp-robotua' 'perl-lwp-protocol-file'
  'perl-http-config' 'perl-http-headers-util' 'perl-lwp-authen-digest'
  'perl-http-headers-etag' 'perl-http-date' 'perl-lwp-protocol-http'
  'perl-lwp-membermixin' 'perl-lwp-protocol-ghttp' 'perl-lwp-useragent'
  'perl-lwp-debug' 'perl-www-robotrules-anydbm_file' 'perl-net-http-methods')
source=(http://www.cpan.org/authors/id/G/GA/GAAS/${_realname}-${pkgver}.tar.gz)
md5sums=('8fd7d7e793355c4e6e6806c70f6d2917')

build() {
  cd ${srcdir}/${_realname}-${pkgver}
  # install module in vendor directories.
  perl Makefile.PL --aliases INSTALLDIRS=vendor || return 1
  make  || return 1
  make install DESTDIR=${pkgdir} || return 1

  # remove perllocal.pod and .packlist
  find ${pkgdir} -name perllocal.pod -delete
  find ${pkgdir} -name .packlist -delete
}
